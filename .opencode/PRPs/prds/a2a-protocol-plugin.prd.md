# A2A Protocol Plugin

## Problem Statement

–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏ AI-–∏–Ω–∂–µ–Ω–µ—Ä—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ OpenCode, –∏—Å–ø—ã—Ç—ã–≤–∞—é—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º—É A2A-–∞–≥–µ–Ω—Ç–æ–≤. –°–µ–≥–æ–¥–Ω—è –Ω–µ—Ç –≥–æ—Ç–æ–≤–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è OpenCode –∫ –≤–Ω–µ—à–Ω–∏–º A2A-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º –∞–≥–µ–Ω—Ç–∞–º –±–µ–∑ –Ω–∞–ø–∏—Å–∞–Ω–∏—è custom integration code. –≠—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ OpenCode –∏ —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞.

**–°—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã:** –¢–µ—Ä—è–µ—Ç—Å—è –≤—Ä–µ–º—è –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞, —É—Å–ª–æ–∂–Ω—è–µ—Ç—Å—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω—ã—Ö —Å–∏—Å—Ç–µ–º, –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π OpenCode –≤–Ω–µ—à–Ω–∏–º —Å–∏—Å—Ç–µ–º–∞–º.

## Evidence

- **User quote:** "–ù—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ A2A-–∞–≥–µ–Ω—Ç—É –±–µ–∑ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞" ‚Äî —Ç–∏–ø–∏—á–Ω–∞—è –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞-–∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä–∞
- **User quote:** "–•–æ—á—É –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å OpenCode –∫–∞–∫ A2A-–∞–≥–µ–Ω—Ç –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–∏—Å—Ç–µ–º" ‚Äî –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å AI-–∏–Ω–∂–µ–Ω–µ—Ä–∞
- **Observation:** A2A Protocol v0.3.0 released, @a2a-js/sdk v0.3.10 available, but no ready plugin for OpenCode exists
- **Assumption:** –ü–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π PRD –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

## Proposed Solution

A2A Protocol Plugin ‚Äî —ç—Ç–æ –ø–ª–∞–≥–∏–Ω –¥–ª—è OpenCode, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ Agent-to-Agent (A2A) –≤–µ—Ä—Å–∏–∏ 0.3.0. –ü–ª–∞–≥–∏–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç OpenCode –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –≤–Ω–µ—à–Ω–∏–º–∏ A2A-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏ (–∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Ä–µ–∂–∏–º) –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ OpenCode –∫–∞–∫ A2A-—Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–∏—Å—Ç–µ–º (—Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–∂–∏–º).

**–ü–æ—á–µ–º—É —ç—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π @a2a-js/sdk ‚Äî –Ω–µ –Ω—É–∂–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ ‚Äî —Å–ª–µ–¥—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ A2A Protocol
- –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ‚Äî –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å

## Key Hypothesis

–ú—ã –≤–µ—Ä–∏–º, —á—Ç–æ **–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è OpenCode —Å A2A-–ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º** –ø–æ–∑–≤–æ–ª–∏—Ç **–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–Ω–µ—à–Ω–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤ –±–µ–∑ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞**. –ú—ã —É–∑–Ω–∞–µ–º, —á—Ç–æ –º—ã –ø—Ä–∞–≤—ã, –∫–æ–≥–¥–∞ **–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–º–æ–≥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–∞–º –∏ –ø–æ–ª—É—á–∞—Ç—å –æ—Ç–≤–µ—Ç—ã —á–µ—Ä–µ–∑ –≥–æ—Ç–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã**.

## What We're NOT Building

- **Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Webhook-–∏)** ‚Äî —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∑–∞—è–≤–ª–µ–Ω –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –Ω–æ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ MVP
- **–°–ª–æ–∂–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏** ‚Äî —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **GUI –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–ª–∞–≥–∏–Ω–∞** ‚Äî —Ç–æ–ª—å–∫–æ CLI –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤ –≤ —Å–µ—Ç–∏ (LAN discovery)** ‚Äî –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Å–∫–∏–ª–æ–≤
- **–ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–π –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏** ‚Äî –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é
- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞** ‚Äî TLS –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–º —É—Ä–æ–≤–Ω–µ
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–∏–Ω–∞—Ä–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤** ‚Äî —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —á–∞—Å—Ç–∏
- **–ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å –∏ –∏–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** ‚Äî –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä, –æ–¥–∏–Ω tenant

## Success Metrics

| Metric                    | Target        | How Measured              |
| ------------------------- | ------------- | ------------------------- |
| Uptime —Å–µ—Ä–≤–µ—Ä–∞            | > 99.5%       | Health check endpoint    |
| –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –Ω–∞ ping     | < 100ms       | Health check latency     |
| Timeout —Å–µ—Ç–µ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π  | 10 —Å–µ–∫—É–Ω–¥     | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ           |
| –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ | 100% —Ç–∏–ø–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç      | 4/4           | –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ      |

## Open Questions

- [ ] –ö–∞–∫ A2A Protocol –±—É–¥–µ—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è (–≤–æ–∑–º–æ–∂–Ω—ã breaking changes –≤ –≤–µ—Ä—Å–∏—è—Ö > 0.3.x)?
- [ ] –ù—É–∂–Ω–∞ –ª–∏ –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è production?
- [ ] –¢—Ä–µ–±—É–µ—Ç—Å—è –ª–∏ OAuth 2.0 –¥–ª—è enterprise –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è?
- [ ] –ù—É–∂–Ω–∞ –ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –±–∏–Ω–∞—Ä–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤?

---

## Users & Context

**Primary User**
- **Who:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫-–∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä ‚Äî –∏–Ω–∂–µ–Ω–µ—Ä, –∫–æ—Ç–æ—Ä–æ–º—É –Ω—É–∂–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å OpenCode —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π A2A-–∞–≥–µ–Ω—Ç–æ–≤ –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- **Current behavior:** –ü–∏—à–µ—Ç custom integration code –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
- **Trigger:** –ù—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å OpenCode –∫ A2A-–∞–≥–µ–Ω—Ç—É –∏–ª–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å OpenCode –∫–∞–∫ A2A-–∞–≥–µ–Ω—Ç
- **Success state:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–æ—Ç–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –±–µ–∑ –∫–æ–¥–∞, Agent Card –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Ä–∞–∂–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

**Job to Be Done**
When **–º–Ω–µ –Ω—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å OpenCode –∫ A2A-–∞–≥–µ–Ω—Ç—É**, I want to **–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –±–µ–∑ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞**, so I can **–±—ã—Å—Ç—Ä–æ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º –≤–Ω–µ—à–Ω–µ–≥–æ –∞–≥–µ–Ω—Ç–∞**.

**Non-Users**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å enterprise —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ (OAuth 2.0, RBAC, –∞—É–¥–∏—Ç)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å GUI-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å high-load —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ (rate limiting, connection pooling)

---

## Solution Detail

### Core Capabilities (MoSCoW)

| Priority | Capability                    | Rationale                                            |
|----------|-------------------------------|------------------------------------------------------|
| Must     | a2a_send                      | –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∞–≥–µ–Ω—Ç–∞–º     |
| Must     | a2a_discover                  | –ü–æ–ª—É—á–µ–Ω–∏–µ Agent Card –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π        |
| Must     | a2a_task_status               | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏                             |
| Must     | a2a_cancel                    | –û—Ç–º–µ–Ω–∞ –∑–∞–¥–∞—á                                        |
| Must     | –°–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–∂–∏–º               | –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ OpenCode –∫–∞–∫ A2A-–∞–≥–µ–Ω—Ç–∞              |
| Must     | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è                | Bearer token + API key                              |
| Must     | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è                  | JSONC + environment variables                       |
| Should   | Health check endpoints        | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏                              |
| Should   | Prometheus metrics            | Observability                                        |
| Should   | –ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ (SSE)      | Real-time –æ—Ç–≤–µ—Ç—ã –æ—Ç –∞–≥–µ–Ω—Ç–æ–≤                         |
| Could    | Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è               | Webhook-–º–µ—Ö–∞–Ω–∏–∑–º ‚Äî –Ω–µ –¥–ª—è MVP                       |
| Won't    | OAuth 2.0 / OIDC              | –¢—Ä–µ–±—É–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤                       |
| Won't    | GUI –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è              | –¢–æ–ª—å–∫–æ CLI                                          |

### MVP Scope

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≥–∏–ø–æ—Ç–µ–∑—ã:
1. 4 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ (a2a_send, discover, task_status, cancel)
2. –°–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–∂–∏–º —Å –±–∞–∑–æ–≤—ã–º–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏
3. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (Bearer token, API key)
4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ JSONC + env vars
5. Health check endpoint

### User Flow

**–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Ä–µ–∂–∏–º:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç agentUrl –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. –í—ã–∑—ã–≤–∞–µ—Ç a2a_discover –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∞–≥–µ–Ω—Ç–∞
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ a2a_send
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å —á–µ—Ä–µ–∑ a2a_task_status –∏–ª–∏ –æ—Ç–º–µ–Ω—è–µ—Ç —á–µ—Ä–µ–∑ a2a_cancel

**–°–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–∂–∏–º:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∫–ª—é—á–∞–µ—Ç serverMode –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. –ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä (node server.mjs)
3. –í–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø–æ–ª—É—á–∞—é—Ç Agent Card –ø–æ /.well-known/agent-card.json
4. –í–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ JSON-RPC –∏–ª–∏ REST

---

## Technical Approach

**Feasibility: HIGH**

–ü–æ—Ç–æ–º—É —á—Ç–æ:
- @a2a-js/sdk ^0.3.10 —É–∂–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- 12 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- Express —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç
- Factory pattern –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å

### Architecture Notes

- **SDK-first:** –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ @a2a-js/sdk, –Ω–∏–∫–∞–∫–æ–≥–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
- **Factory Pattern:** ClientFactory –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏
- **Interceptor Pattern:** AuthInterceptor –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **Module Separation:** client, server, config, tools, utils ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏

### Technical Risks

| Risk                              | Likelihood | Mitigation                              |
| --------------------------------- | ---------- | --------------------------------------- |
| –ò–∑–º–µ–Ω–µ–Ω–∏—è A2A Protocol            | Medium     | Pinned SDK ^0.3.10, –∏–∑–æ–ª—è—Ü–∏—è SDK-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π |
| –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å Plugin API         | Medium     | –°—Ç–∞–±–∏–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ @opencode-ai/plugin   |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ | Low    | Rate limiting –≤ roadmap                 |

---

## Implementation Phases

| # | Phase                              | Description                                              | Status      | Parallel | Depends | PRP Plan |
|---|------------------------------------|----------------------------------------------------------|-------------|----------|---------|----------|
| 1 | –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞            | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ç–∏–ø—ã      | pending     | -        | -       | .opencode/PRPs/plans/phase-1-basic-infrastructure.plan.md |
| 2 | –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª             | 4 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, client.ts               | pending     | -        | 1       | .opencode/PRPs/plans/phase-2-client-functionality.plan.md |
| 3 | –°–µ—Ä–≤–µ—Ä–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª              | Express —Å–µ—Ä–≤–µ—Ä, —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, health checks, metrics      | pending     | -        | 2       | .opencode/PRPs/plans/phase-3-server-functionality.plan.md |
| 4 | –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å–∫–∏–ª–æ–≤  | discovery.ts, skill-mapper.ts, client.session API       | pending     | -        | 3       | .opencode/PRPs/plans/phase-4-dynamic-skill-discovery.plan.md |
| 5 | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –∫–∞—á–µ—Å—Ç–≤–æ           | README, AGENTS, SKILL, biome lint                       | pending     | -        | -       | .opencode/PRPs/plans/phase-5-documentation-quality.plan.md |

### Phase Details

**Phase 1: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** ‚úÖ
- **Goal:** –°–æ–∑–¥–∞—Ç—å –æ—Å–Ω–æ–≤—É –ø–ª–∞–≥–∏–Ω–∞
- **Scope:** TypeScript –ø—Ä–æ–µ–∫—Ç, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ç–∏–ø—ã
- **Success signal:** –ü—Ä–æ–µ–∫—Ç –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

**Phase 2: –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª** ‚úÖ
- **Goal:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å A2A-–∞–≥–µ–Ω—Ç–∞–º–∏
- **Scope:** 4 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞, AuthInterceptor, client.ts
- **Success signal:** –í—Å–µ 4 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç —Å —Ç–µ—Å—Ç–æ–≤—ã–º –∞–≥–µ–Ω—Ç–æ–º

**Phase 3: –°–µ—Ä–≤–µ—Ä–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª** ‚úÖ
- **Goal:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è OpenCode –∫–∞–∫ A2A-–∞–≥–µ–Ω—Ç–∞
- **Scope:** Express —Å–µ—Ä–≤–µ—Ä, —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, health checks, metrics
- **Success signal:** –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, Agent Card –¥–æ—Å—Ç—É–ø–µ–Ω

**Phase 4: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å–∫–∏–ª–æ–≤** üìã
- **Goal:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ client.session API
- **Scope:** discovery.ts, skill-mapper.ts, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Agent Card
- **Success signal:** Agent Card —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å–∫–∏–ª—ã –∏–∑ client.session

**Phase 5: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –∫–∞—á–µ—Å—Ç–≤–æ** ‚úÖ
- **Goal:** –û–±–µ—Å–ø–µ—á–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- **Scope:** README, AGENTS.md, SKILL.md, biome lint
- **Success signal:** –ö–æ–¥ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞

### Parallelism Notes

Phases 1-3 –∏ 5 —É–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω—ã. Phase 4 –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Phase 3 (—Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ Agent Card).

---

## Decisions Log

| Decision                              | Choice                              | Alternatives                    | Rationale                                            |
| ------------------------------------- | ----------------------------------- | -------------------------------- | ---------------------------------------------------- |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å @a2a-js/sdk              | –î–∞                                  | –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ | –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π SDK, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é          |
| Factory Pattern –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞           | –î–∞                                  | Singleton, –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ  | –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è      |
| JSONC –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏                | –î–∞                                  | TOML, YAML, —Ç–æ–ª—å–∫–æ env vars      | JSON —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ —É–¥–æ–±–Ω–æ                         |
| Express –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞                  | –î–∞                                  | Fastify, raw Node.js            | –ó–Ω–∞–∫–æ–º—ã–π, —Å—Ç–∞–±–∏–ª—å–Ω—ã–π, –º–Ω–æ–≥–æ –ø—Ä–∏–º–µ—Ä–æ–≤                |
| Bearer token + API key                | –î–∞                                  | OAuth 2.0, JWT                   | –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è MVP, –ø—Ä–æ—Å—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å              |

---

## Research Summary

### Market Context

**A2A Protocol:**
- –û—Ç–∫—Ä—ã—Ç—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –ø–æ–¥ Linux Foundation (–≤–∫–ª–∞–¥ Google)
- 22.2k GitHub stars
- –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –∏–Ω—Ç–µ—Ä–æ–ø–µ—Ä–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏ —Ä–∞–∑–Ω—ã—Ö –≤–µ–Ω–¥–æ—Ä–æ–≤
- –í–µ—Ä—Å–∏—è 0.3.0 released

**–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã:**
- MCP (Anthropic): 79.7k stars ‚Äî agent-to-tools (–∫–æ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π)
- LangGraph: 25.3k stars ‚Äî –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
- AgentRPC: RPC-style communication

**–¢—Ä–µ–Ω–¥—ã:**
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤
- Enterprise adoption
- –†–∞—Å—Ç—É—â–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ SDK

### Technical Context

**–°—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- @a2a-js/sdk ^0.3.10 –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- 12 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- Express —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç
- Factory pattern + AuthInterceptor

**–ö–æ–¥–æ–≤–∞—è –±–∞–∑–∞:**
- `src/types.ts` ‚Äî —Ç–∏–ø—ã –ø–ª–∞–≥–∏–Ω–∞
- `src/config.ts` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ JSONC
- `src/client.ts` ‚Äî SDK wrappers
- `src/interceptor.ts` ‚Äî –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `src/executor.ts` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á
- `src/server.ts` ‚Äî Express —Å–µ—Ä–≤–µ—Ä
- `src/tools/a2a-tools.ts` ‚Äî 12 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- `src/utils/logger.ts` ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç (Phase 4):**
- `src/discovery.ts` ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ client.session API
- `src/skill-mapper.ts` ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –≤ A2A Skills

---

*Generated: 2026-03-01*
*Status: DRAFT - needs validation*
